local map = MapDef(
    822,
    "0908061044",
	
	"393658407D4869787B22734C5B2532626E345B6C422D773B4D496F584544526E5347652A4825323538352A47695330635A466B2D58725E41374A712A304C39674A5D72436C5532732532357B56725745236738766E48536841742C767E4C47435D406F5271417D4E226E376D7E6E4F5D616E46795A3D654925326273375C305E3B2069224336264F4C6722705927253235447D6C2240557A487F6E703C674926337435676E756E757B41243B4B776640464C52202532355E342C3A55422A3A5E33277228307375534850763C435356764A556B352A2A49446A65795E324628585E7B5458544D5141216F642843",
    "265c3a0d274c165a2c2827302425370f3226044b004d59544f2608325235122e0a4c3d133f2053333942512d5c062b3c1322243d5312401a371336246b0f59170b2932092015641e1f2d22223c210e3339291c2f470f560c1f0f076e005b23183b5c0428631b553a553f5a4108430b4e4e102906431138466d2c15584721341b291e261854552c4752155406261d06471e20455a2a162e28272d3741443f5055723d234b5f3f5246107f781b32322d31175d22321e1e0d340e544b4b2825220d3e3f572749393f1a1c30132c3420400e00450b517139250c2f08191a6a1b0b3a4e0f553a0d23651f7c2c2c0e39242533266000504f294459544b0f011b56063b270a4c393a260f682f104b512d582f223540260d34531764333e1a65204206591217003b0920114d171f2d260b35210e3710201c2c75265f2a1f0b2e3c000f2731327a042c4a12563d5116536708472257472e2d2f4a37384244251c0d43083d3d291a0f115d06286e5b3354020f140f141a094c7c2a120721272d33684d1955495b34234b5b160046474d511214373118457b753637172b340a7d526416210b04183f530e40306c1e3539352928094907564d2258573921352008191e43122d3a4a265c3a0d274c165a293027300225370f3226044b004d7f544f2a59325102122e2c4c3d133f20562b3942772d5c062b3c1322243d7512401a371336246b0f7f170b2932092015641e392d22223c210e3339293a2f470f560c1f0f0813005923183b5c013163407069553f5a4108430b4e68102906431138466d2c155e4721341b291e26185d062c4752155731291d0f4c1e20455a2a252e28012d3741443f554d723d054b5f3775461349781b32322d31175d22321e1e0d340e544b4b2825220d3e3f572749393f1a1c30132c3420400e05490b517139251c2908191a6a1b0b3a4e0f553a0d23651f7c2c2c0e39242533263b00044f294459544b0f5a1405063b270a4c39352629682f104b51287c2f223540260d34531244333e353620420659170f003b2f20114d171f2d260b35070e3710201c2f43265f2a1f0b2e3c000f2731327a042c4a12563d511653682347227f712e2d2f4a381342440d2a0d43083d32021a0f396b06286e5b3354020f140f141a094c7c2a120721272d33684d1955495b34234b5b165b60134d511214322918457b763637172b340a7d526416210b04183f530e40393f1e3539352928094928054d2a7f57392135202e191e43122d3a4a265c1c0d274c165a2c2827300d0e370f1a10044b004d707f4f262f045102122e23673d133f20562b394278065c062b3c1322243d7a39401a101336246b0f7f130b2932092015641e392d22223c210e3339293a2f470f560c1f0f0735260f23183b5c0428631b706a553f5a4108430b4e4e102906431138466d2c3a0d4721341b291e26187b062c4752155406261d29141e20455a2a162e280e0637416309554d723d0a605f3f52461349781b3d192d31175d22321e1e021f0e544b4b2825220d3114572749393f1a1c301c073420680e05490b51713d251c2908191a6a1b0b3a4e0f553a0d23651f7c2c2c0e39242533266000524f294459544b00013b01063b270a4c0a3a3620562f104b512d582f221a13260d345312443c3e136e204206591216003b200b114d3f392d260b3508253710201c2f43265f25340b2e3c000f273132752f2c4a35463d511653682347227f572e2d2f4a381342440d0c0d43083d3d291a0f115d06286e5b3354020f140f141a094c7c2a120721272d33684d1955495b34234b5b160060474d5112143229171e54723637172b34387d426d28210b04183f530e401f3f1e353935293c094928054d2258573921352021321e43122d3a4a265c1326274c165a2c2827300d0e370f1636044b004d7f544f2608325102122e2c4c3d133f20562b3942772d5c062b3c1322243d7512401a371336246b0f7f170b2932092015641e392d22223c210e3339293a2f470f560c1f0f076e265b23183b5c0428631b563d553f5a4108430b5e612e290e641138466d2c3a0d4721341b291e2618742d2c4776235406261d263f1e20455a2a162e280e063741602f554d723d054b5f3f52461349781b32322d31175d22321e1e0d340e544b4b2825220d3e3f572749393f1a1c30132c342f450e05490b517139251c2908191a6a1b0b3a4e0f553a0d23651f7c2c2c0e3924253326602f484f29445951530f011451063b270a4c393a3606562f1c1a512d582f221538260d10651244333e3a1d20420659170f003b200b114d300f2d260b35070e3710201c2f43265f2a1f0b2e3c000f2731327a042c4a12563d5116536708472257472e2d2f4a37384244251c0d43083d3d291a0f115d06286e5b3354020f140f141a094c7c2a120721272d33684d1955495b34234b5b195b464b4d5112143730181e7b223637172b340a7d426203210b2c3e3f530e4010141e3539352c300949272e4d225857392135202e191e43122d3a4a265c3a0d274c165a293027300225370f3226044b004d7f544f2608325102122e2c4c3d133f20562b3942772d5c062b3c1322243d7512401a371336246b0f7f170b2932092015641e392d22223c210e3339291c7b470f560c1f0f0735260f23183b5c0428631b703d553f5a4108430b5e6e052906431138466d2c35264721341b291e2618742d2c477a155406261d29141e20455a2a162e28272d3741443f567a723d054b5f3f52461349781b32322d31175d22321e1e0d340e544b4b2825220d3e3f572749393f1a1c30132c3420400e05490b517139251c2908191a6a1b0b6e4e0f553a0d23651f5a2c2c0e39242533263b00044f294459544b0f011b7a063b033c4c393a36097d2f104b512d582f221538260d10431244333e353620420659170f003b0920114d171f2e110b35070e3710201c2f43265f2a1f0b2e3c000f2731327a042c4a12563d5119534108472257472e2d2f4a37384244251c0d43083d3d291a0f115d06286e5b3300020f140f141a094c592d120721272d33684d1955495b34234b5b165b6f384d513a323229181e74093637172b340a7d426203210b04183f530e401f3f1e3539352c3009490e054d2258573a1735202e191e43122d3a4a265c3a0d274c165a293027300225370f3226044b0f4d59544f26083251021d2e0a4c3d133f20562b3942772d5c062b3c1322243d7a15401a371336246b0f5a100b293209250d641e1f2d22223c210e3339293a2f470f560c1f0f0735292423183b5c0428631b7f16553f5a4108430b5e6e0529066b1138466d2c1c0d4721341b291e26187b062c4752155406261d294c1e20455a2a162e28012d3741443f554d7d3d234b5f3f52461349771b14322d31175d2232111e2b340e544b4b2825220d3e3f572749393f1a1330362b3420400e006a0451543e251c290819296a1b0b3a4e0f553a0d23651f7c282c0e39242533263b0f2f4f294459544b0f011b7a063b270a4c393a3606562f104b512d5820223c4b260d3453175d333e353620420659170f0f3b0920114d171f283d0435210e3710201c2f43295f0c1f0b2e3c000f273e325c042c4a12563d5119534108472257472e2d2f4a123f4244251c085b083d322e1a0f115d06286e5b167f020f300f141a094c7c2e120721272d33684d167e495b34234b5b165b6f384d5112143229181e74093637332b340a7d426d28210b04183f530e401f3f1e3539352c30094928054d22585739213a2008191e43122d3a4a295c3a0d274c165a2c2828302425370f3226044b0f4d59544f26083251021d2e0a4c3d133f20562b39527e755c062b3c1322243d5015401a371336246b0f703c0b2916092015641e392922223c210e3339293504470f560c1f0f0735292423183b5c0428631b7f16553f7d4108430b5e612e290643113846622c1c554721341b2c0629185d062c4752155406291d0f141e20455a2a162128272d3741443f554d7d3d234b5f3f52461349771b14322d31175d2232111e22670e544b4b2825220d376d572749393f1a1c3036073420400e05490b517e12251c2908191a6a1b0b6c4e0f553a0d23651f73072c0e1d022533263b0f2f4f294459544b0f011b7a063b0f0a4c393a3606562f104b512d5820223c13260d345312443c3e133620420659170f0f3b0920114d171f2d260435210e3710201c3c61295f0c1f0b2e3c000f273e3255572c4a12563d5116434850472257472b352f6c116c4244251c0d43083d32021a1f175d06286e5b3c79020f3d0f141a064c5a2e120721272e07684d167e495b10054b5b165b6f384d523d143229181e740936373f1d340a7d426d28210b04183f530140393f1e3539352c3006490e054d22585739213a2008191e43122d3a4a295c3a0d274c165a2c2828302425370f3226044b0f4d59544f260832510212080a1b3d133f20562b394252065c06022c1322243d7a39401a371336246b29703a0b291b112015641e392922223c210e3339293504470f560c1f0f0735292423183b5c0428631b7f16553f724108430b5e612e29064311384662771f204721102d291e29185d062c4752155406291d0f141e20455a2a162128272d3741443f554d7d3d234b5f3f52461349780b1d6a2d31175d2232110e2b600e544b4b2d31221d3e6b572749393f1a1c161c013420692805490b517e12251c0d08191a6a1b04114e0f710c0d23651f73072c0e39242533263b0f2f4f294459544b0f013251063b270a49213a36097d2f106f672d5820793f3e260d345312443c3e133620420659170f0f3b0920114d171f2d260435210e3710201c2f43295f0c1f0b2e3c000f273122555c2c4a12563d5116084836472257472e2d205a116c4244251c0e76083d32021a0f357b06286e5b3c7f020f140f141a094c7301120721272d33684d167e495b10054b5b165b6f384d5136143229181e74093637301d340a7d426203211b03183f53011b3a121e351d252c3006490e054d22585739213a2008191e43122d3a4a295c3a0d274c165a2c2828302425370f3226044b004d5a534f26083251021d7503723d133f20562b395277795c062b3c1322243d7a39401a133536246b0f703c0b2932092015641e3606222218210e3339293504470f560c1f0f0735292423183b5c0428631b7f16553f7e5108430b5e6e0529066b013846622c1c0d4721341b291e29185d062c4752155406291d0f141e20455a2a162128272d3741443f554d7d662a755f3f52461349781b1d612d31175d22321e45040a0e544b4b2825221d3e6b572749393f1a1c301c073420642805490b517e12251c2908191a6a1b04114e0f553a0d23651f73072c0e1d342533263b0f2f4f296c49544b0f011451063b270a49353a3606562f104b51285420223c13260d345312443c3e133620420659170f0f3b0920114d171f2d260435285d3710201c2f43264f05470b2e3c000f27313273572c4a12563d5116086e36472257472b212f5a376c4244251c0d43083d32021a0f394d06286e5b3c7f020f3c1f141a094c7301120709372d33684d1955495313234b5b165b60134d5112143229181e7b223637172b340a7d426d70210b04183f530140393f1e3539352c3006490e054d22585739213a20014a1e43122d3a4a265c3333274c165a2c2827302d76370f3226044b004d76074f2608325102127525723d133f20562b395277795c062b3c1322243d7512401a371336246b0f7f170b2932092015641e392d22223c210e3339293a2f470f560c1f0f0735260f23101c5c0428631b703d553f5a410843045e472e290643113846622c1c0d4721341b291e291854552c4752155406261d062a1e20455a2a162e28242a3741443f554d723d2a185f3f52461651781b3b612d31175d22321e45220a0e544b4b2b12221d3e6b572749393f1a1c30132c3420400e05490b51716f251c2908191a6a1b0b3a4e0f553a0d23651f7c2c2c0e39242533263b00524f294459544b0f013251063b270e4417353620562f104b512d5820223f14260d3453124433181a6e20420659170f00600977114d171f2d260435285d3710201c2a5a265f234c0b2e3c000f27313273572c4a12563d51160848364722574726032f5a376c4244251c0d43083d3d7d1a0f115d06286e4b3300020f140f141a094c7c2a120721272d33684d1901495b34234b5b164b46474d511214311e181e5d223637172b3c2372194264210b04183f530e1b39681e3539352c30096f0e514d22585739213506084f1e43122d3f52265c335e274c165a290827300b70370f3226044b004d76074f2608325102127503723d133f20551c394258615c062b3c163a243d7c40401a371336246b1f7f430b2563092015641e397922223c210e333929157f470f560817210725005b23183b5c0428631b563d553f5a4108430b7847782906431138466d0a1c5b4721341b2c1226185d062c475215511e261d06471e20455a2a1621282e7e3741443f5059723d2a185f3f52461651781b1d612d31175d27121e45220a0e544b4b200b220d116f572749393f1a1c303c7c3420400e05490b41576e251c2908191a6a1b246a4e0f553a0e14651f537c2c0e3924202b262b26504f294459544b0f013251063b270a4c393a3620562f104b512d582f223c13260d345312443c3e1336204206591216",
    15,
    17,
    24,
    -13,
    164
)

map.positions = "bQbTb4b5b7b8chck|fbfqfFfUgogCgDgR"
map.capabilities = 47

-- '1;1;1;0;0;0;0' forbiddens -> capabilities ? Or script ?

local function tryEntering(_, _, p)
    if p:getItem(961) and p:getItem(962) and p:getItem(963) then
        p:teleport(1767, 394)
    else
        -- TODO: send error (in chat)
    end
end

map.onMovementEnd = {
    [305] = moveEndTeleport(809, 303),
    [21] = moveEndTeleport(821, 440),
    [356] = tryEntering,
}

RegisterMapDef(map)
